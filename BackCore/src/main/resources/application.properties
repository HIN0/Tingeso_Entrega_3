# ===================================================================
# CONFIGURACIÓN DE BASE DE DATOS (PostgreSQL)
# ===================================================================
# La URL apunta a localhost porque el backend corre fuera de Docker. 
# La base de datos se llama 'toolrent' según tu compose.yml.
spring.datasource.url=jdbc:postgresql://localhost:5432/toolrent
spring.datasource.username=postgres
spring.datasource.password=admin
spring.datasource.driver-class-name=org.postgresql.Driver

# ===================================================================
# CONFIGURACIÓN DE JPA / HIBERNATE
# ===================================================================
# Usamos 'update' para que no borre los datos cada vez que reinicies.
# Cambiar a 'create-drop' solo si deseas limpiar la base de datos en cada inicio.
# ANTES TENIA 'update', pero para pruebas puedes usar 'create-drop' y luego volver a 'update'.
spring.jpa.hibernate.ddl-auto=create-drop 
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Inicialización de datos (si usas data.sql)
# 'defer-datasource-initialization' asegura que Hibernate cree las tablas antes de insertar los datos.
spring.sql.init.mode=always
spring.jpa.defer-datasource-initialization=true

# ===================================================================
# CONFIGURACIÓN DE SEGURIDAD (Keycloak / OAuth2)
# ===================================================================
# El backend usa el puerto 8090 para validar los tokens contra Keycloak.
spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8090/realms/toolrent-realm
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=http://localhost:8090/realms/toolrent-realm/protocol/openid-connect/certs

# ===================================================================
# CONFIGURACIÓN DEL SERVIDOR
# ===================================================================
# Puerto por defecto del backend (donde escuchará las peticiones del frontend).
server.port=8080

# ===================================================================
# MANEJO DE ERRORES Y LOGS
# ===================================================================
logging.level.org.springframework.security=INFO
logging.level.app=DEBUG